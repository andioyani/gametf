<div *ngIf="game" class="container">

	<div *ngIf="round && game.status != 'finished'">
		<div class="jumbotron jumbotron-fluid text-center">
		  <div class="container">
		    <h1 class="display-4">Letra: {{ game.letters[game.current] }}
		      </h1>
		    <p class="lead">Ronda {{game.current+1}}/{{game.rounds}}</p>
		  </div>
		</div>
		<h2 class="text-center"> </h2>

		<div *ngIf="game.status == 'revision'">
 				<div class="alert alert-danger" role="alert" *ngIf="userApproved()">
				  Esperando la confirmación del resto de los jugadores
				</div>

				<div class="container" *ngFor="let player of roundsPlayers">
					
						<h3 class="text-center">{{ player.name }} </h3>					


						<div class="card bg-secondary mb-3" *ngFor="let categoryPlayer of player.roundPlayer[game.current].categories; let catIndex = index">
						  
						  <div class="card-body">
						    <h5 class="card-title text-white">{{ categoryPlayer.name }} ( {{ categoryPlayer.points }} Pts.)</h5>
						    
						    
						  </div>
						  <ul class="list-group list-group-flush">						   
						    <li class="list-group-item d-flex justify-content-between align-items-center">
						    	<span >
						    		<i class="far fa-check-circle fa-lg" style="color:green" *ngIf="categoryPlayer.value && categoryPlayer.points > 0"></i> 
									<i class="far fa-times-circle fa-lg" style="color:red" *ngIf="!categoryPlayer.value || categoryPlayer.points == 0"></i>
									 {{ categoryPlayer.value || '-'}} 
								</span>
							</li>
							<div *ngIf="categoryPlayer.value">
							    <li class="list-group-item text-center bg-info">Revisión</li>

							    <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let revision of categoryPlayer.revision; let usrIndex = index">
								    	{{ revision.name }} 
										<span *ngIf="revision.uid == userId"  class="badge">
											<button type="button" class="btn btn-sm btn-outline-danger" *ngIf="revision.approved" (click)="revisionApprove(player, catIndex, usrIndex)">
												Desaprobar <i class="far fa-times-circle" ></i>
											</button>
											<button type="button" class="btn btn-sm btn-outline-success" *ngIf="!revision.approved" (click)="revisionApprove(player, catIndex, usrIndex)">
												Aprobar <i class="far fa-check-circle" ></i>
											</button>
										</span>

										<span *ngIf="revision.uid != userId"  class="badge">
											<i class="fas fa-thumbs-up fa-lg text-success" aria-hidden="true" *ngIf="revision.approved"></i>
											<i class="fas fa-thumbs-down fa-lg text-danger" aria-hidden="true"  *ngIf="!revision.approved"  ></i>
										</span>
								</li>
							</div>
						  </ul>
						</div>
				</div>

			<button class="btn btn-block btn-success" type="button" (click)="approve()" [disabled]="userApproved()" >CONTINUAR </button>
		</div>
		<div *ngIf="game.status == 'online'">
			<hr>
				<form
						#roundForm="ngForm" *ngIf="game"
						(ngSubmit)="onSubmit(roundForm)"
						class="animated fadeInDown"
				>	
					<div class="form-group" *ngFor="let category of round.roundPlayer[game.current].categories">
							<input class="form-control" type="text" name="{{ category.name }}" id="{{ category.name }}" placeholder="{{ category.name }}" [(ngModel)]="category.value" (change)="changeValue()">					
					</div>
					<hr>

					<button class="btn btn-block btn-success mb-2" type="submit" style=" height: 70px;font-size: x-large;" >BASTA PARA MI! </button>
					
				</form>
		</div>	

	</div>
	
	<div *ngIf="game.status == 'finished'" class="container">	

			<h3 class="text-center mt-2 mb-2">Juego Finalizado!</h3>
			<hr>		
			<div class="text-center animated fadeInDown m-3" *ngIf="game.winner">
			  <h2 *ngIf="game.winner.length == 1" class="text-success">GANADOR</h2>
			  <h2 *ngIf="game.winner.length > 1" class="text-primary">HAY EMPATE</h2>
			  
			  <div *ngFor="let winner of game.winner">
				  <img src="{{winner.photo || 'https://pbs.twimg.com/media/CLYEKp1WcAI8Bl5.jpg'}}" class="card-img-top img-winner" alt="...">		
				  <h3>{{winner.name}}</h3>
				  <h2>{{winner.points}} Pts.</h2>			  	
			  </div>
			</div>

		  <div class="col" *ngFor="let data of roundsPlayers">
			<hr>		  	
		    <div class="mt-3">		      
		      <div class="text-center">
		      	<img src="{{ data.photo || 'https://pbs.twimg.com/media/CLYEKp1WcAI8Bl5.jpg'}}" class="img-player-ranking" alt="...">	
		      </div>
		      
		      <div class="">
		        <h5 class="card-title text-center"><i class="fas fa-star text-warning mr-1" *ngIf=" data.uid == game.winner.uid"></i>{{ data.name }}</h5>
		        <p class="card-text text-center">{{ data.points }} Pts.</p>
		      </div>

		      	<div *ngFor="let round of data.roundPlayer">
		      		<h2 class="text-center">{{ round.letter }}</h2>
		      		<ul class="list-group"> 
		      			<div *ngFor="let cats of round.categories">
		      			<li class="list-group-item d-flex justify-content-between align-items-center  text-white" [ngClass]="cats.points > 0 ? 'bg-success' : 'bg-danger' ">
		      				<b>{{ cats.name }}</b>			      				 
		      			</li>
		      			<li class="list-group-item d-flex justify-content-between align-items-center">
		      				{{ cats.value || '-'}}
							<span class="badge">
								({{ cats.points }} pts.)	
							</span>			      				
		      				
		      			</li>
		      			</div>
		      		</ul>
		      	</div>
		    </div>
		  </div>

		

	</div>

</div>